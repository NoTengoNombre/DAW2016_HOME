<!--
    @Created on : 10-ene-2017, 20:18:11
    @Author     : RVS - N.F.N.D - Home
    @Pag        :
    @version    :
    @TODO       :
-->
<!DOCTYPE html>
<html lang="es">
  <head>
    <title></title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="">
    <style>
      table{
        text-align: center;
        background-color: #f96;
        width: 25%;
        margin:auto;
        border: 2px #F30 dashed;
        padding: 15px;
      }
    </style>
    <script>

      /**
       * personaliar el mensaje de error , validar cuando todos los campos esten rellenados
       * identificar los elementos que vamos a manipular en js
       * @returns {undefined}
       */
//1º AL cargar la pagina llama a esta funcion 
//1º Lee todo el codigo del interior y llega hasta validar
      function comenzar() {

// Estos elementos tienen que estar a la escucha para que una funcion 
// pueda validarlos
        var nombre = document.getElementById("nombre");
        var apellido = document.getElementById("apellido");

//        primer objeto NOMBRE preparado para la escucha
// cuando introduzcamos informacion dentro del objeto lanzara el evento
        nombre.addEventListener("input", validar, false);

        apellido.addEventListener("input", validar, false);

//      llamada la funcion 
//cuando cargue la pagina , llamara a la funcion , identifica los elementos
//los pone a la escucha y llama a la funcion validar;
//2º Lee todo el codigo del interior y llega hasta validar
//2º Este metodo esta asociado al metodo comenzar() que tiene asociado un escuchador de eventos
        validar(); // metodo para validar 
      }

      /**
       * Si el campo esta vacio , muestre mensaje y lo ponga en rojo
       * Si se llama una vez , 
       mantiene el error de ejecucion todo el flujo de ejecucion del programa
       Tenemos que anularlo con una cadena VACIA =""
       * @returns {undefined}
       */
//3º El validador de eventos esta comprobando continuamente los campos
      function validar() {
        if ((nombre.value == "") && (apellido.value == "")) {
          nombre.setCustomValidity("Introduce nombre o apellido Usuario Nuevo");
//         mensaje de Error personaliado - usamos la propiedad style
          nombre.style.background = "#f00";
          apellido.style.background = "#f90";
        } else {
//          Resetea el error 
          nombre.setCustomValidity("");
          nombre.style.background = "#fff";
          apellido.style.background = "#fff";

        }
      }


//      load - cuando cargue la pagina llama a la funcion comenzar
      window.addEventListener("load", comenzar, false);
    </script>
  </head>
  <body>
    <section>
      <h1>Uso del datalist - 2 casillas de texto <br>
        Se valide cuando las 2 esten rellenas <br>
        Si hay alguna que no este rellena que avise</h1>
      <form name="registro" method="get">
        <table>
          <tr>
            <td>Nombre</td>
            <td>
              <input type="text" name="nombre" id="nombre">
            </td>
          </tr>
          <tr>
            <td>Apellido</td>
            <td>
              <input type="text" name="apellido" id="apellido">
            </td>
          </tr>
          <tr>
            <td>Edad</td>
            <td>
              <input type="number" name="edad" id="edad" min="1" max="100">
            </td>
          </tr>
          <tr>
            <td></td>
            <td>
              <input type="submit" id="Enviar" value="Registrar">
            </td>
          </tr>
        </table>

      </form>
    </section>
  </body>
</html>


